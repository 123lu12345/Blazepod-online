
<!DOCTYPE html>

<html lang="de">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>BlazePod Dashboard</title>
<style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #0e5c78;
      color: white;
      display: flex;
      flex-direction: column;
      height: 100vh;
    }
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem;
    }
    header .nickname {
      cursor: pointer;
      text-decoration: underline;
    }
    header button {
      background-color: transparent;
      border: 1px solid white;
      color: white;
      padding: 0.4rem 1rem;
      border-radius: 0.4rem;
      cursor: pointer;
    }
    main {
      flex: 1;
      overflow-y: auto;
      padding: 1rem;
    }
    .tab-content {
      display: none;
      width: 100%;
      text-align: center;
    }
    .tab-content.active {
      display: block;
    }
    nav {
      display: flex;
      justify-content: space-around;
      align-items: center;
      background-color: #08485d;
    }
    .tab {
      flex: 1;
      text-align: center;
      padding: 1rem 0.5rem 0.2rem;
      cursor: pointer;
    }
    .tab-icon {
      font-size: 1.5rem;
    }
    .tab.active {
      border-top: 4px solid #66d9ff;
    }
    input, select {
      font-size: 1rem;
      padding: 0.4rem;
      border-radius: 0.4rem;
      margin: 0.3rem;
      border: none;
    }
    .controls, .settings {
      margin-top: 1rem;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .color-selection {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 0.8rem;
      margin-top: 1rem;
    }
    .color-option {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .color-option input {
      transform: scale(1.3);
    }
    button {
      font-size: 1.1rem;
      padding: 0.5rem 1.5rem;
      border-radius: 0.5rem;
      border: none;
      cursor: pointer;
      margin-top: 1rem;
    }
    #startBtn { background: #28a745; color: white; }
    #stopBtn { background: #dc3545; color: white; }
    #countdown, #timer {
      font-size: 1.4rem;
      margin-top: 1rem;
    }
  
#loginOverlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: #0e5c78;
  color: white;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}
#loginOverlay input {
  padding: 0.5rem;
  font-size: 1.2rem;
  border-radius: 0.5rem;
  border: none;
  margin-top: 1rem;
  width: 250px;
}
#loginOverlay button {
  margin-top: 1rem;
  padding: 0.5rem 1.5rem;
  font-size: 1.2rem;
  border: none;
  border-radius: 0.5rem;
  cursor: pointer;
  background: #66d9ff;
  color: #000;
}

</style>
<style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #0e5c78;
      color: white;
      display: flex;
      flex-direction: column;
      height: 100vh;
    }
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem;
    }
    header .nickname {
      cursor: pointer;
      text-decoration: underline;
    }
    header button {
      background-color: transparent;
      border: 1px solid white;
      color: white;
      padding: 0.4rem 1rem;
      border-radius: 0.4rem;
      cursor: pointer;
    }
    main {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 2rem;
    }
    .tab-content {
      display: none;
      width: 100%;
      text-align: center;
    }
    .tab-content.active {
      display: block;
    }
    nav {
      display: flex;
      justify-content: space-around;
      align-items: center;
      background-color: #08485d;
    }
    .tab {
      flex: 1;
      text-align: center;
      padding: 1rem 0.5rem 0.2rem;
      cursor: pointer;
    }
    .tab-icon {
      font-size: 1.5rem;
    }
    .tab.active {
      border-top: 4px solid #66d9ff;
    }
    .qr-row {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 1rem;
      margin-top: 1rem;
    }
    .qr-code {
      background: white;
      padding: 0.5rem;
      border-radius: 0.5rem;
      text-align: center;
    }
    .qr-code canvas {
      width: 120px;
      height: 120px;
    }
    .status-row {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin-top: 2rem;
    }
    .pod-status {
      background: #444;
      padding: 1rem 2rem;
      border-radius: 1rem;
      font-weight: bold;
      color: white;
    }
    .connected {
      background: green !important;
    }
    #loginOverlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #0e5c78;
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }
    #loginOverlay input {
      padding: 0.5rem;
      font-size: 1.2rem;
      border-radius: 0.5rem;
      border: none;
      margin-top: 1rem;
      width: 250px;
    }
    #loginOverlay button {
      margin-top: 1rem;
      padding: 0.5rem 1.5rem;
      font-size: 1.2rem;
      border: none;
      border-radius: 0.5rem;
      cursor: pointer;
      background: #66d9ff;
      color: #000;
    }
  </style></head>
<body>
<div id="loginOverlay">
<h2>Bitte gib deinen Namen ein</h2>
<input id="playerNameInput" placeholder="Dein Name..." type="text"/>
<button id="loginButton">Anmelden</button>
</div>
<header>
<div class="nickname" onclick="openProfile()">Hi, Spieler</div>
<button onclick="logout()">Abmelden</button>
</header>
<main>
<div class="tab-content" id="tab-start">
<h2>üè† Spiel starten</h2>
<div class="settings">
<label>Spiel beenden nach:
          <select id="endMode">
<option value="time">Zeit (Minuten)</option>
<option value="blinks">Anzahl Blinks</option>
</select>
</label>
<label id="durationLabel">Spielzeit (min): <input id="gameDuration" max="15" min="1" type="number" value="1"/></label>
<label id="blinkCountLabel" style="display:none;">Anzahl Blinks: <input id="blinkCount" max="500" min="1" style="display:none;" type="number" value="20"/></label>
<label>Blink-Intervall (Sek.): <input id="blinkInterval" min="0.1" step="0.1" type="number" value="1"/></label>
<label>Pause zwischen Blinks (Sek.): <input id="grayPause" min="0" step="0.1" type="number" value="1"/></label>
<label>Spielmodus:
          <select id="gameMode">
<option value="classic">Classic</option>
<option value="all-at-once">All At Once</option>
<option value="shapes">Formen</option>
<option value="numbers">Zahlen</option>
<option value="touch-switch">Touch to Switch</option>
<option value="focus">Fokus</option>
<option value="stroop">Stroop-Test</option>
</select>
</label>
<div id="targetColorWrapper" style="display:none;">
<label>Zielfarbe:
            <select id="targetColor">
<option value="red">Rot</option>
<option value="blue">Blau</option>
<option value="green">Gr√ºn</option>
<option value="yellow">Gelb</option>
<option value="orange">Orange</option>
<option value="white">Wei√ü</option>
<option value="gray">Grau</option>
<option value="brown">Braun</option>
<option value="violet">Violett</option>
</select>
</label>
</div>
<div class="color-selection" id="colorSelection">
<div class="color-option"><input data-color="red" id="color_red" type="checkbox"/><label for="color_red">Rot</label></div>
<div class="color-option"><input data-color="blue" id="color_blue" type="checkbox"/><label for="color_blue">Blau</label></div>
<div class="color-option"><input data-color="green" id="color_green" type="checkbox"/><label for="color_green">Gr√ºn</label></div>
<div class="color-option"><input data-color="yellow" id="color_yellow" type="checkbox"/><label for="color_yellow">Gelb</label></div>
<div class="color-option"><input data-color="orange" id="color_orange" type="checkbox"/><label for="color_orange">Orange</label></div>
<div class="color-option"><input data-color="white" id="color_white" type="checkbox"/><label for="color_white">Wei√ü</label></div>
<div class="color-option"><input data-color="gray" id="color_gray" type="checkbox"/><label for="color_gray">Grau</label></div>
<div class="color-option"><input data-color="brown" id="color_brown" type="checkbox"/><label for="color_brown">Braun</label></div>
<div class="color-option"><input data-color="violet" id="color_violet" type="checkbox"/><label for="color_violet">Violett</label></div>
</div>
</div>
<div class="controls">
<button id="startBtn">Start</button>
<button id="stopBtn">Stopp</button>
<div id="countdown"></div>
<div id="timer"></div>
</div>
</div>
<div class="tab-content" id="tab-history">
<h2>üìä Spielverlauf</h2>
<div id="spielverlaufContainer"></div>
</div>
<div class="tab-content" id="tab-settings">
<h2>‚öôÔ∏è Einstellungen</h2>
<p>QR-Codes f√ºr Pods zum Verbinden:</p>
<div class="qr-row" id="qrCodes"></div>
<p style="margin-top:2rem;">Verbindungsstatus:</p>
<div class="status-row">
<div class="pod-status" id="pod1">Pod 1</div>
<div class="pod-status" id="pod2">Pod 2</div>
<div class="pod-status" id="pod3">Pod 3</div>
<div class="pod-status" id="pod4">Pod 4</div>
<div class="pod-status" id="pod5">Pod 5</div>
</div>
</div>
</main>
<nav>
<div class="tab" onclick="switchTab('history')"><div class="tab-icon">üìä</div></div>
<div class="tab" onclick="switchTab('start')"><div class="tab-icon">üè†</div></div>
<div class="tab" onclick="switchTab('settings')"><div class="tab-icon">‚öôÔ∏è</div></div>
</nav>
<script>
    function switchTab(tab) {
      document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
      document.querySelector(`#tab-${tab}`).classList.add('active');
      document.querySelectorAll('nav .tab').forEach(el => el.classList.remove('active'));
      document.querySelectorAll('nav .tab')[['history','start','settings'].indexOf(tab)].classList.add('active');
    }

    document.addEventListener('DOMContentLoaded', () => {
      const savedName = localStorage.getItem('playerName');
      if (savedName) {
        document.getElementById('loginOverlay').style.display = 'none';
        document.querySelector('.nickname').textContent = 'Hi, ' + savedName;
      }

      document.getElementById('loginButton').addEventListener('click', () => {
        const name = document.getElementById('playerNameInput').value.trim();
        if (name.length > 0) {
          localStorage.setItem('playerName', name);
          document.querySelector('.nickname').textContent = 'Hi, ' + name;
          document.getElementById('loginOverlay').style.display = 'none';
          switchTab('start');
        } else {
          alert("Bitte gib deinen Namen ein.");
        }
      });

      document.getElementById('endMode').addEventListener('change', () => {
        const mode = document.getElementById('endMode').value;
        const showBlinks = mode === 'blinks';
        document.getElementById('blinkCount').style.display = showBlinks ? 'inline-block' : 'none';
        document.getElementById('blinkCountLabel').style.display = showBlinks ? 'inline-block' : 'none';
        document.getElementById('gameDuration').style.display = showBlinks ? 'none' : 'inline-block';
        document.getElementById('durationLabel').style.display = showBlinks ? 'none' : 'inline-block';
      });

      document.getElementById('gameMode').addEventListener('change', () => {
        const mode = document.getElementById('gameMode').value;
        document.getElementById('targetColorWrapper').style.display = (mode === 'focus') ? 'block' : 'none';
      });
    });

    
    function logout() {
      localStorage.removeItem('playerName');
      document.getElementById('loginOverlay').style.display = 'flex';
      document.querySelector('.nickname').textContent = 'Hi, Spieler';
      document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
      document.querySelectorAll('nav .tab').forEach(el => el.classList.remove('active'));
    }


    function openProfile() {
      alert("Hier k√∂nnte dein Profilfenster erscheinen!");
    }
  </script>
<script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script><script>
    const socket = io();

    const podStatus = {
      1: document.getElementById('pod1'),
      2: document.getElementById('pod2'),
      3: document.getElementById('pod3'),
      4: document.getElementById('pod4'),
      5: document.getElementById('pod5'),
    };

    socket.on('update', connected => {
      Object.keys(podStatus).forEach(id => {
        podStatus[id].classList.remove('connected');
        if (connected.includes(id)) {
          podStatus[id].classList.add('connected');
        }
      });
    });

    function switchTab(tab) {
      document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
      document.querySelector(`#tab-${tab}`).classList.add('active');
      document.querySelectorAll('nav .tab').forEach(el => el.classList.remove('active'));
      document.querySelectorAll('nav .tab')[['history','start','settings'].indexOf(tab)].classList.add('active');
    }

    function logout() {
      localStorage.removeItem('playerName');
      document.getElementById('loginOverlay').style.display = 'flex';
    }

    function openProfile() {
      alert("Hier k√∂nnte dein Profilfenster erscheinen!");
    }

    // QR-Codes generieren
    const baseURL = window.location.origin;
    const qrContainer = document.getElementById('qrCodes');
    for (let i = 1; i <= 5; i++) {
      const div = document.createElement('div');
      div.classList.add('qr-code');
      const canvas = document.createElement('canvas');
      div.appendChild(canvas);
      const label = document.createElement('div');
      label.innerText = `Pod ${i}`;
      div.appendChild(label);
      qrContainer.appendChild(div);

      new QRious({
        element: canvas,
        value: `${baseURL}/pod/${i}`,
        size: 120
      });
    }

    // Login-Funktion
    document.addEventListener('DOMContentLoaded', () => {
      const savedName = localStorage.getItem('playerName');
      if (savedName) {
        document.getElementById('loginOverlay').style.display = 'none';
        document.querySelector('.nickname').textContent = 'Hi, ' + savedName;
      }

      document.getElementById('loginButton').addEventListener('click', () => {
        const name = document.getElementById('playerNameInput').value.trim();
        if (name.length > 0) {
          localStorage.setItem('playerName', name);
          document.querySelector('.nickname').textContent = 'Hi, ' + name;
          document.getElementById('loginOverlay').style.display = 'none';
          switchTab('start');
        } else {
          alert("Bitte gib deinen Namen ein.");
        }
      });
    });
  </script></body>
</html>
