
<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>BlazePod Dashboard</title>
    <script src="https://cdn.socket.io/4.3.2/socket.io.min.js"></script>
    <style>
        body { font-family: Arial; background: #111; color: white; text-align: center; }
        .pod-status div { display: inline-block; margin: 5px; padding: 10px; border-radius: 10px; background: gray; }
        .connected { background: green !important; }
    </style>
</head>
<body>
    <h1>BlazePod Dashboard</h1>
    <div class="pod-status">
        <div id="pod1">Pod 1</div>
        <div id="pod2">Pod 2</div>
        <div id="pod3">Pod 3</div>
        <div id="pod4">Pod 4</div>
    </div>
    <br>
    Spielzeit (min): <input type="number" id="duration" value="5"><br>
    Blink-Intervall (sek): <input type="number" id="interval" value="3"><br>
    Pause zwischen Blinks (sek): <input type="number" id="pause" value="1"><br>
    Modus:
    <select id="mode">
        <option value="classic">Classic</option>
        <option value="touch">Touch to Switch</option>
    </select><br>
    <label><input type="checkbox" id="useColors"> Mehrfarbenmodus</label><br>
    Benötigte Pods:
    <select id="requiredPods">
        <option value="1">1 Pod</option>
        <option value="2">2 Pods</option>
        <option value="3">3 Pods</option>
        <option value="4" selected>4 Pods</option>
    </select><br><br>
    <button onclick="startGame()">Start</button>
    <button onclick="stopGame()">Stopp</button>
    <div id="status"></div>

    <script>
        const socket = io();

        socket.on('pod_status', data => {
            [1, 2, 3, 4].forEach(id => {
                document.getElementById('pod' + id).classList.remove('connected');
            });
            data.connected_pods.forEach(id => {
                document.getElementById('pod' + id).classList.add('connected');
            });
        });

        socket.on('game_over', () => {
            document.getElementById('status').textContent = 'Spiel beendet';
        });

        function startGame() {
            socket.emit('start_game', {
                duration: document.getElementById('duration').value,
                interval: document.getElementById('interval').value,
                pause: document.getElementById('pause').value,
                mode: document.getElementById('mode').value,
                required_pods: document.getElementById('requiredPods').value,
                use_colors: document.getElementById('useColors').checked
            });
            document.getElementById('status').textContent = 'Spiel läuft...';
        }

        function stopGame() {
            socket.emit('stop_game');
            document.getElementById('status').textContent = 'Spiel abgebrochen';
        }
    </script>
</body>
</html>
